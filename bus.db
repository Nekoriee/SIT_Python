DROP TABLE IF EXISTS bustop;
CREATE TABLE IF NOT EXISTS bustop (
	bustop_id INTEGER PRIMARY KEY AUTOINCREMENT,
	bustop_name VARCHAR(50)
);

DROP TABLE IF EXISTS route;
CREATE TABLE IF NOT EXISTS route (
	route_id INTEGER PRIMARY KEY AUTOINCREMENT,
	route_name VARCHAR(5)
);

DROP TABLE IF EXISTS bustop_route;
CREATE TABLE IF NOT EXISTS bustop_route (
	bustop_route_id INTEGER PRIMARY KEY AUTOINCREMENT,
	bustop_id INT,
	route_id INT,
	bustop_route_movetime INT,
	FOREIGN KEY(bustop_id) REFERENCES bustop(bustop_id) ON DELETE CASCADE,
	FOREIGN KEY(route_id) REFERENCES route(route_id) ON DELETE CASCADE
);

DROP TABLE IF EXISTS bus;
CREATE TABLE IF NOT EXISTS bus (
	bus_id INTEGER PRIMARY KEY AUTOINCREMENT,
	bus_model VARCHAR(15),
	bus_number VARCHAR(10),
	bus_status VARCHAR(15)
);

DROP TABLE IF EXISTS driver;
CREATE TABLE IF NOT EXISTS driver (
	driver_id INTEGER PRIMARY KEY AUTOINCREMENT,
	driver_name VARCHAR(100)
);

DROP TABLE IF EXISTS trip;
CREATE TABLE IF NOT EXISTS trip (
	trip_id INTEGER PRIMARY KEY AUTOINCREMENT,
	route_id INT,
	bus_id INT,
	driver_id INT,
	trip_timestart DATETIME,
	FOREIGN KEY (route_id) REFERENCES route (route_id) ON DELETE CASCADE,
	FOREIGN KEY (bus_id) REFERENCES bus (bus_id) ON DELETE CASCADE,
	FOREIGN KEY (driver_id) REFERENCES driver (driver_id) ON DELETE CASCADE
);

DROP TABLE IF EXISTS time;
CREATE TABLE IF NOT EXISTS time (
	bustop_route_id INT,
	trip_id INT,
	time_arrivetime DATETIME,
	FOREIGN KEY (bustop_route_id) REFERENCES bustop_route (bustop_route_id) ON DELETE CASCADE,
	PRIMARY KEY (bustop_route_id, trip_id)
);

INSERT INTO bustop (bustop_name) VALUES
('Луговая'),
('Карская'),
('Спиридонова'),
('Стоматологическая поликлиника'),
('Рассвет'),
('Зелёный угол'),
('Ладыгина'),
('Поликлиника'),
('Баляева'),
('Депутатская'),
('Демидюка'),
('Панфилова'),
('Магазин (71-й м-н)'),
('Нейбута'),
('Спиридонова'),
('Шепеткова'),
('Горная'),
('Новоивановская (пл. Луговая)'),
('Спортивная'),
('Вилкова'),
('Гастроном (Вилкова)'),
('Запорожская'),
('Окатовая'),
('Восточная верфь'),
('Катерная'),
('Большой Улисс'),
('Новосильцевская батарея'),
('Мини-ТЭЦ - Центральная'),
('Вертодром'),
('Аякс'),
('Кампус ДВФУ'),
('ДВФУ: Южные ворота'),
('Пожарная академия'),
('Бухта Парис'),
('ТЭЦ Океанариум'),
('Приморский океанариум'),
('Спортивная (рынок)'),
('Бурачка'),
('Олега Кошевого'),
('Радиоприбор'),
('Надибаидзе'),
('Мариинский театр'),
('Некрасовская'),
('Молодёжная'),
('100-летия Владивостока'),
('Фирсова'),
('Постышева'),
('Парк Победы'),
('ТЦ Универсам'),
('Автовокзал'),
('ВГУЭС'),
('Студенческая');

INSERT INTO route (route_name) VALUES
('18'),
('16К'),
('74'),
('77');

INSERT INTO bus (bus_model, bus_number, bus_status) VALUES
('Gazelle', 'б347ко', 'в парке'),
('Gazelle', 'с623ат', 'в парке'),
('Toyota', 'е442сс', 'в парке'),
('Toyota', 'т584ав', 'в парке'),
('Daewoo', 'у431хр', 'в парке'),
('Daewoo', 'р097ан', 'в парке'),
('Daewoo', 'к106ра', 'в парке'),
('Hyundai', 'с823хм', 'в пути'),
('Hyundai', 'с310хм', 'в парке'),
('Hyundai', 'е330рк', 'в парке');

INSERT INTO bustop_route (bustop_id, route_id, bustop_route_movetime) VALUES
(1, 1, 0),
(2, 1, 2),
(3, 1, 4),
(4, 1, 5),
(5, 1, 7),
(6, 1, 8),
(7, 1, 10),
(1, 2, 0),
(8, 2, 6),
(9, 2, 11),
(6, 2, 15),
(7, 2, 17),
(10, 2, 19),
(11, 2, 21),
(12, 2, 22),
(13, 2, 24),
(14, 2, 26),
(9, 3, 0),
(8, 3, 3),
(17, 3, 6),
(18, 3, 8),
(19, 3, 11),
(21, 3, 16),
(22, 3, 20),
(23, 3, 23),
(24, 3, 27),
(25, 3, 30),
(26, 3, 32),
(27, 3, 37),
(28, 3, 40),
(29, 3, 42),
(30, 3, 41),
(31, 3, 42),
(32, 3, 43),
(33, 3, 45),
(34, 3, 47),
(35, 3, 50),
(36, 3, 53),
(36, 4, 0),
(35, 4, 3),
(34, 4, 5),
(33, 4, 7),
(32, 4, 8),
(31, 4, 9),
(30, 4, 10),
(29, 4, 12),
(28, 4, 15),
(27, 4, 20),
(26, 4, 22),
(25, 4, 25),
(24, 4, 29),
(23, 4, 32),
(38, 4, 34),
(39, 4, 37),
(40, 4, 38),
(41, 4, 41),
(42, 4, 44),
(43, 4, 49),
(44, 4, 55),
(45, 4, 58),
(46, 4, 60),
(47, 4, 62),
(48, 4, 65),
(49, 4, 67),
(50, 4, 70);

INSERT INTO driver (driver_name) VALUES
('Павлов К. А.'),
('Тихонов И. Р.'),
('Титов Б. Я.'),
('Филиппов К. С.'),
('Горбачёв Ф. И.'),
('Максимов М. Т.'),
('Петров Е. А.'),
('Александров М. Р.'), 
('Андреев А. М.');

INSERT INTO trip (route_id, bus_id, driver_id, trip_timestart) VALUES
(1, 3, 1, '2022-10-20 14:00:00'),
(1, 4, 2, '2022-10-20 14:35:00'),
(2, 1, 3, '2022-10-20 09:30:00'),
(2, 2, 4, '2022-10-20 12:10:00'),
(3, 5, 6, '2022-10-20 17:25:00'),
(3, 6, 7, '2022-10-19 16:45:00'),
(3, 6, 7, '2022-10-20 15:20:00'),
(4, 7, 5, '2022-10-20 07:40:00'),
(4, 8, 8, '2022-10-21 11:15:00'),
(2, 2, 4, '2022-10-21 10:45:00'),
(4, 9, 9, '2022-10-20 18:25:00');


